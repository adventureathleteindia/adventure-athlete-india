<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experience Preview | Adventure Athlete India</title>
    <!-- Brand Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Chart.js for elevation profile -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --forest: #2D5A3D;
            --forest-dark: #1E3D2A;
            --amber: #D97706;
            --amber-light: #F59E0B;
            --dark: #1A202C;
            --slate: #64748b;
            --slate-dark: #475569;
            --white: #FFFFFF;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --font-heading: 'Oswald', sans-serif;
            --font-body: 'Source Sans 3', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-body);
            font-size: 16px;
            line-height: 1.7;
            color: var(--dark);
            background: var(--gray-50);
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 24px;
        }

        header {
            background: var(--forest);
            color: var(--white);
            padding: 40px 24px;
            margin-bottom: 24px;
            text-align: center;
        }

        header h1 {
            font-family: var(--font-heading);
            font-size: 2rem;
            font-weight: 500;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        header .experience-meta {
            font-size: 14px;
            opacity: 0.85;
            letter-spacing: 0.5px;
        }

        .status-bar {
            background: var(--white);
            padding: 16px 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .status-badge {
            padding: 6px 14px;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .status-draft { background: #FEF3C7; color: #92400E; }
        .status-review { background: #DBEAFE; color: #1E40AF; }
        .status-final { background: #D1FAE5; color: #065F46; }

        .content-section {
            background: var(--white);
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .section-header {
            background: var(--gray-100);
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--gray-200);
        }

        .section-header h2 {
            font-family: var(--font-heading);
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--dark);
        }

        .section-actions { display: flex; gap: 8px; }

        .btn {
            padding: 10px 18px;
            font-family: var(--font-body);
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn:hover { transform: translateY(-1px); }
        .btn-copy { background: var(--forest); color: var(--white); }
        .btn-copy:hover { background: var(--forest-dark); }
        .btn-copy.copied { background: var(--amber); }
        .btn-edit { background: var(--slate); color: var(--white); }
        .btn-edit:hover { background: var(--slate-dark); }
        .btn-primary {
            background: var(--amber);
            color: var(--white);
            padding: 14px 28px;
            font-size: 15px;
        }
        .btn-primary:hover {
            background: var(--amber-light);
            box-shadow: 0 4px 15px rgba(217, 119, 6, 0.3);
        }

        .section-content { padding: 20px; }

        .content-display {
            white-space: pre-wrap;
            font-size: 15px;
            line-height: 1.8;
            color: var(--slate-dark);
        }

        .content-edit {
            display: none;
            width: 100%;
            min-height: 200px;
            padding: 16px;
            font-family: var(--font-body);
            font-size: 15px;
            line-height: 1.8;
            border: 2px solid var(--forest);
            resize: vertical;
        }

        .content-edit:focus { outline: none; border-color: var(--amber); }
        .editing .content-display { display: none; }
        .editing .content-edit { display: block; }
        .editing .btn-edit { background: var(--amber); }

        .quick-facts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 16px;
            padding: 24px;
            background: var(--gray-50);
        }

        .fact-item { text-align: center; padding: 12px; }
        .fact-value {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--forest);
            margin-bottom: 4px;
        }
        .fact-label {
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--slate);
        }

        .instagram-preview {
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
            padding: 3px;
        }
        .instagram-preview-inner { background: var(--white); padding: 20px; }
        .youtube-preview { background: #FF0000; padding: 3px; }
        .youtube-preview-inner { background: var(--white); padding: 20px; }

        .source-info {
            background: var(--white);
            border-left: 4px solid var(--amber);
            padding: 16px 20px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .source-info h4 {
            font-family: var(--font-heading);
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--amber);
            margin-bottom: 8px;
        }

        .checklist-section {
            background: var(--white);
            border-left: 4px solid var(--forest);
            padding: 20px;
            margin-bottom: 20px;
        }
        .checklist-section h3 {
            font-family: var(--font-heading);
            font-size: 16px;
            font-weight: 500;
            color: var(--forest);
            margin-bottom: 16px;
        }
        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid var(--gray-100);
            font-size: 14px;
        }
        .checklist-item:last-child { border-bottom: none; }
        .checklist-status {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600;
            flex-shrink: 0;
        }
        .checklist-status.done { background: var(--forest); color: var(--white); }
        .checklist-status.missing { background: #EF4444; color: var(--white); }
        .checklist-status.warning { background: var(--amber); color: var(--white); }

        .finalize-section {
            background: var(--white);
            padding: 40px;
            text-align: center;
            margin-top: 32px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .finalize-section h3 {
            font-family: var(--font-heading);
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--dark);
        }
        .finalize-section p { color: var(--slate); margin-bottom: 24px; font-size: 15px; }

        .author-box { text-align: center; padding: 28px; }
        .author-name { font-family: var(--font-heading); font-size: 1.1rem; font-weight: 500; margin-bottom: 4px; }
        .author-brand { color: var(--slate); font-weight: 400; }
        .author-credentials { color: var(--slate); font-size: 14px; margin-bottom: 16px; }
        .author-links { display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; }
        .author-links a { color: var(--forest); font-size: 14px; font-weight: 500; text-decoration: none; transition: color 0.2s; }
        .author-links a:hover { color: var(--amber); }

        .char-count { font-size: 12px; color: var(--slate); text-align: right; margin-top: 8px; }
        .char-count.warning { color: #EF4444; }

        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--dark);
            color: var(--white);
            padding: 14px 24px;
            font-size: 14px;
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        .toast.show { display: block; }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .elevation-section { background: var(--white); margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .elevation-chart-container { padding: 20px; position: relative; }
        .elevation-chart-wrapper { position: relative; height: 250px; margin-bottom: 16px; }
        .elevation-stats {
            display: flex;
            justify-content: space-around;
            padding: 16px;
            background: var(--gray-50);
            border-top: 1px solid var(--gray-200);
        }
        .elevation-stat { text-align: center; }
        .elevation-stat-value {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--forest);
        }
        .elevation-stat-label {
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--slate);
        }
        .btn-download { background: var(--forest); color: var(--white); }
        .btn-download:hover { background: var(--forest-dark); }

        @media (max-width: 600px) {
            .section-header { flex-direction: column; gap: 12px; }
            .quick-facts { grid-template-columns: repeat(2, 1fr); }
            header h1 { font-size: 1.6rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="experienceTitle">Chuur Peak - Hike</h1>
            <div class="experience-meta" id="experienceMeta">Hiking | Hard | 2022-12-22</div>
        </header>

        <div class="status-bar">
            <div>
                <span class="status-badge status-review" id="statusBadge">Ready for Review</span>
            </div>
            <div style="font-size: 13px; color: #64748b;">
                <span id="lastUpdated">Generated just now</span>
            </div>
        </div>

        <!-- Source Info -->
        <div class="source-info">
            <h4>Content Generated From</h4>
            <div id="sourceInfo">
                <strong>Route:</strong> Thanach village to Chuur Peak (3850m) and back<br>
                <strong>Your notes:</strong> Chuur Peak (3850m) - One of the less explored peaks between Jalori Pass and Bashleo Pass. Speed attempt from 2300m to 3850m in under 5km. Dense wild forest, no trail, bears, panoramic summit views...
            </div>
        </div>

        <!-- Website Migration Checklist -->
        <div class="checklist-section">
            <h3>Website Migration Checklist</h3>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>Basic info complete (title, category, difficulty)</span>
            </div>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>Location complete (start/end, district, how to reach)</span>
            </div>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>Metrics available (distance, elevation, duration)</span>
            </div>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>Raw notes captured</span>
            </div>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>YouTube video linked (eFu2RSlQZ0I)</span>
            </div>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>Strava activity linked (8269328652)</span>
            </div>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>7 photos added to media/photos/</span>
            </div>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>GPX file added (Chuur_peak_summit_.gpx) - 3 altitude spikes cleaned</span>
            </div>
            <div class="checklist-item">
                <div class="checklist-status done">&#10003;</div>
                <span>Metrics corrected from raw notes (GPX showed 7142m, actual summit 3850m)</span>
            </div>
        </div>

        <!-- Quick Facts -->
        <div class="content-section">
            <div class="section-header">
                <h2>Quick Facts</h2>
            </div>
            <div class="quick-facts" id="quickFacts">
                <div class="fact-item">
                    <div class="fact-value" id="factDistance">10.7 km</div>
                    <div class="fact-label">Distance</div>
                </div>
                <div class="fact-item">
                    <div class="fact-value" id="factElevation">1550m</div>
                    <div class="fact-label">Elevation</div>
                </div>
                <div class="fact-item">
                    <div class="fact-value" id="factDuration">~8-9 hrs</div>
                    <div class="fact-label">Duration</div>
                </div>
                <div class="fact-item">
                    <div class="fact-value" id="factDifficulty">Hard</div>
                    <div class="fact-label">Difficulty</div>
                </div>
                <div class="fact-item">
                    <div class="fact-value" id="factAltitude">3850m</div>
                    <div class="fact-label">Summit</div>
                </div>
                <div class="fact-item">
                    <div class="fact-value" id="factSeason">Oct-Nov</div>
                    <div class="fact-label">Best Season</div>
                </div>
            </div>
        </div>

        <!-- Elevation Profile -->
        <div class="content-section elevation-section" id="elevationSection">
            <div class="section-header">
                <h2>Elevation Profile</h2>
                <div class="section-actions">
                    <button class="btn btn-download" onclick="downloadElevationPNG()" id="downloadElevationBtn">
                        Download PNG
                    </button>
                </div>
            </div>
            <div id="elevationContent">
                <div class="elevation-chart-container">
                    <div class="elevation-chart-wrapper">
                        <canvas id="elevationChart0"></canvas>
                    </div>
                </div>
                <div class="elevation-stats">
                    <div class="elevation-stat">
                        <div class="elevation-stat-value">2,251m</div>
                        <div class="elevation-stat-label">Min Elevation</div>
                    </div>
                    <div class="elevation-stat">
                        <div class="elevation-stat-value">3,850m</div>
                        <div class="elevation-stat-label">Max Elevation</div>
                    </div>
                    <div class="elevation-stat">
                        <div class="elevation-stat-value">1,695m</div>
                        <div class="elevation-stat-label">Elevation Gain</div>
                    </div>
                    <div class="elevation-stat">
                        <div class="elevation-stat-value">10.7 km</div>
                        <div class="elevation-stat-label">Distance</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Website Description -->
        <div class="content-section" id="websiteSection">
            <div class="section-header">
                <h2>Website Description</h2>
                <div class="section-actions">
                    <button class="btn btn-edit" onclick="toggleEdit('website')">Edit</button>
                    <button class="btn btn-copy" onclick="copyContent('website')">Copy</button>
                </div>
            </div>
            <div class="section-content">
                <div class="content-display" id="websiteDisplay">One of the less explored peaks in Himachal, Chuur Peak sits between the Jalori Pass area and Bashleo Pass. Most people drive right past it on the Anni road without knowing it's there.

I did this as a speed attempt in late December 2022, starting from Thanach village near Anni. The climb goes from 2300m to 3850m in just under 5 km. That's the kind of steep where you question your life choices every 20 minutes. And there's no proper trail - just dense, wild forest with towering trees blocking out the sunlight. As you go higher, it gets rocky with dangerous drops and sheer cliffs on either side. There was actually no route. We just pushed through.

The forest here is serious. Bears live in it, and it's easy to get lost. Do not do this solo. Get a local guide or at least someone who knows the area.

Once we reached the top, the views made everything worth it. Standing at 3850m, I could see Shrikhand Mahadev to the northeast, Churdhar to the southeast, then Kuppar Peak, Moral Danda, Saru Lake, Darkali Hills, and Sundru Peak stretching towards the east. Full panoramic views in every direction.

One thing that hit me - it was late December and there was zero snow on these peaks. The only visible snow was on mountains above 5000m. That's how fast things are changing up here.

Getting There:
First reach Anni, about 120 km from Shimla. From Anni, it's a 30-minute drive to Thanach village. No bus service to Thanach, so you'll need a taxi or your own vehicle. The hike starts from the village.

What to Bring:
- 1.5L water minimum per person (no water on the trail)
- Trekking or hiking shoes
- Draat (hatchet sickle) for the bushy sections
- Plenty of food (avoid non-veg, it can attract wild animals)
- Hiking pole
- A guide or local person - this is not optional

Notes:
- Do not go solo. Wild forest, bears, no marked trail.
- Best season is autumn - late October to November.
- 2300m to 3850m in under 5 km. Be ready for relentless climbing.</div>
                <textarea class="content-edit" id="websiteEdit"></textarea>
                <div class="char-count" id="websiteCount"></div>
            </div>
        </div>

        <!-- Instagram Caption -->
        <div class="content-section" id="instagramSection">
            <div class="section-header">
                <h2>Instagram Caption</h2>
                <div class="section-actions">
                    <button class="btn btn-edit" onclick="toggleEdit('instagram')">Edit</button>
                    <button class="btn btn-copy" onclick="copyContent('instagram')">Copy</button>
                </div>
            </div>
            <div class="section-content">
                <div class="instagram-preview">
                    <div class="instagram-preview-inner">
                        <div class="content-display" id="instagramDisplay">Chuur Peak, 3850m. One of the least explored peaks in Himachal.

2300m to 3850m in under 5 km. No trail. Dense forest. Bears. Cliffs. The kind of hike that doesn't let you forget it existed.

Standing on top, I could see Shrikhand Mahadev, Churdhar, Kuppar Peak, Moral Danda, Saru Lake, Darkali Hills, Sundru Peak. The entire range laid out in every direction.

Late December, and zero snow on these peaks. Only visible snow was above 5000m. That says something.

Do not attempt this solo. Get a local guide. Carry water - there's none on the trail.

üìç Kullu, Himachal Pradesh
üèî 10.7 km | ‚¨Ü 1550m | 3850m summit
‚è± ~8-9 hrs

#chuurpeak #himachalpradesh #himalayanhiking #kullu #adventureathleindia</div>
                        <textarea class="content-edit" id="instagramEdit"></textarea>
                        <div class="char-count" id="instagramCount">0 / 2200 characters</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- YouTube Description -->
        <div class="content-section" id="youtubeSection">
            <div class="section-header">
                <h2>YouTube Description</h2>
                <div class="section-actions">
                    <button class="btn btn-edit" onclick="toggleEdit('youtube')">Edit</button>
                    <button class="btn btn-copy" onclick="copyContent('youtube')">Copy</button>
                </div>
            </div>
            <div class="section-content">
                <div class="youtube-preview">
                    <div class="youtube-preview-inner">
                        <div class="content-display" id="youtubeDisplay">Chuur Peak (3850m) - One of Himachal's Least Explored Peaks

A speed attempt up one of the most remote peaks between Jalori Pass and Bashleo Pass. Starting from Thanach village near Anni, this climb goes from 2300m to 3850m in under 5 km through dense, wild forest with no proper trail.

üìç Route: Thanach Village - Chuur Peak - Thanach Village
üìè Distance: 10.7 km
‚¨Ü Elevation: 1550m gain (2300m to 3850m)
‚è± Duration: ~8-9 hours
üéØ Difficulty: Hard

---

ABOUT THIS HIKE:
Chuur Peak sits between the Jalori Pass area and Bashleo Pass in Kullu district. The trail (if you can call it that) passes through dense forest with bears, dangerous drops, and no markers. Summit views include Shrikhand Mahadev, Churdhar, Kuppar Peak, Moral Danda, Saru Lake, Darkali Hills, and Sundru Peak.

WARNING: Do not attempt solo. A local guide is essential. No water available on the trail. Carry at least 1.5L per person.

---

FOLLOW MY ADVENTURES:
‚Üí Instagram: @adventureathlete.in
‚Üí YouTube: youtube.com/@adventureathleindia
‚Üí Strava: strava.com/athletes/atulchauhan

---

#chuurpeak #himachalpradesh #himalayanhiking #kullu #adventureathleindia</div>
                        <textarea class="content-edit" id="youtubeEdit"></textarea>
                        <div class="char-count" id="youtubeCount"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Short Summary -->
        <div class="content-section" id="summarySection">
            <div class="section-header">
                <h2>Short Summary</h2>
                <div class="section-actions">
                    <button class="btn btn-edit" onclick="toggleEdit('summary')">Edit</button>
                    <button class="btn btn-copy" onclick="copyContent('summary')">Copy</button>
                </div>
            </div>
            <div class="section-content">
                <div class="content-display" id="summaryDisplay">A steep, wild climb from 2300m to 3850m through dense forest and bear territory. One of Himachal's least explored peaks, with panoramic summit views of Shrikhand Mahadev, Churdhar, and the Greater Himalayas.</div>
                <textarea class="content-edit" id="summaryEdit" rows="3"></textarea>
            </div>
        </div>

        <!-- Author Section -->
        <div class="content-section" id="authorSection">
            <div class="section-header">
                <h2>Author Section</h2>
                <div class="section-actions">
                    <button class="btn btn-copy" onclick="copyAuthor()">Copy</button>
                </div>
            </div>
            <div class="author-box">
                <div class="author-name">Atul Chauhan <span class="author-brand">| Adventure Athlete India</span></div>
                <div class="author-credentials">Engineer | Mountain Biker | Trail Runner | National Level Athlete</div>
                <div class="author-links">
                    <a href="https://instagram.com/adventureathlete.in" target="_blank">Instagram</a>
                    <a href="https://youtube.com/@adventureathleindia" target="_blank">YouTube</a>
                    <a href="https://strava.com/athletes/atulchauhan" target="_blank">Strava</a>
                </div>
            </div>
        </div>

        <!-- Finalize -->
        <div class="finalize-section">
            <h3>Ready to Finalize?</h3>
            <p>Review all content above. Edit if needed. Then click finalize to save.</p>
            <button class="btn btn-primary" onclick="finalizeContent()">
                Finalize & Save Content
            </button>
            <p style="margin-top: 16px; font-size: 13px; color: #64748b;">
                This will download all content files. Move them to the experience's <code>content/</code> folder.
            </p>
        </div>
    </div>

    <div class="toast" id="toast">Copied to clipboard!</div>

    <script>
        function syncContent(section) {
            const display = document.getElementById(section + 'Display');
            const edit = document.getElementById(section + 'Edit');
            if (display && edit) {
                edit.value = display.textContent;
            }
        }

        function toggleEdit(section) {
            const sectionEl = document.getElementById(section + 'Section');
            const display = document.getElementById(section + 'Display');
            const edit = document.getElementById(section + 'Edit');

            if (sectionEl.classList.contains('editing')) {
                display.textContent = edit.value;
                sectionEl.classList.remove('editing');
            } else {
                sectionEl.classList.add('editing');
                edit.focus();
            }

            if (section === 'instagram') {
                updateCharCount('instagram');
            }
        }

        function copyContent(section) {
            const content = document.getElementById(section + 'Display').textContent;
            navigator.clipboard.writeText(content).then(() => {
                showToast('Copied to clipboard!');
                const btn = event.target.closest('.btn-copy');
                btn.classList.add('copied');
                btn.innerHTML = 'Copied!';
                setTimeout(() => {
                    btn.classList.remove('copied');
                    btn.innerHTML = 'Copy';
                }, 2000);
            });
        }

        function updateCharCount(section) {
            const edit = document.getElementById(section + 'Edit');
            const count = document.getElementById(section + 'Count');
            if (edit && count) {
                const len = edit.value.length;
                const max = section === 'instagram' ? 2200 : 5000;
                count.textContent = `${len} / ${max} characters`;
                count.classList.toggle('warning', len > max);
            }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        function finalizeContent() {
            const finalContent = {
                website: document.getElementById('websiteEdit').value || document.getElementById('websiteDisplay').textContent,
                instagram: document.getElementById('instagramEdit').value || document.getElementById('instagramDisplay').textContent,
                youtube: document.getElementById('youtubeEdit').value || document.getElementById('youtubeDisplay').textContent,
                summary: document.getElementById('summaryEdit').value || document.getElementById('summaryDisplay').textContent
            };

            downloadFile('website.md', finalContent.website);
            setTimeout(() => downloadFile('instagram.md', finalContent.instagram), 500);
            setTimeout(() => downloadFile('youtube.md', finalContent.youtube), 1000);

            showToast('Content files downloaded!');
            document.getElementById('statusBadge').textContent = 'Finalized';
            document.getElementById('statusBadge').className = 'status-badge status-final';
        }

        function downloadFile(filename, content) {
            const blob = new Blob([content], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        document.getElementById('instagramEdit').addEventListener('input', () => updateCharCount('instagram'));

        function copyAuthor() {
            const authorText = `---\n\n**Atul Chauhan** | Adventure Athlete India\nElite Cyclist | Trail Runner | Licensed Guide | Engineer\n\n[Instagram](https://instagram.com/adventureathlete.in) | [YouTube](https://youtube.com/@adventureathleindia) | [Strava](https://strava.com/athletes/atulchauhan)`;

            navigator.clipboard.writeText(authorText).then(() => {
                showToast('Author section copied!');
                const btn = event.target.closest('.btn-copy');
                btn.classList.add('copied');
                btn.innerHTML = 'Copied!';
                setTimeout(() => {
                    btn.classList.remove('copied');
                    btn.innerHTML = 'Copy';
                }, 2000);
            });
        }

        // Elevation chart data (cleaned - 3 GPS spikes removed, capped at 3850m)
        const elevationData = [{"distance":0.0,"elevation":2251.4},{"distance":0.101,"elevation":2276.4},{"distance":0.201,"elevation":2303.4},{"distance":0.303,"elevation":2341.0},{"distance":0.401,"elevation":2362.6},{"distance":0.501,"elevation":2399.0},{"distance":0.6,"elevation":2433.0},{"distance":0.701,"elevation":2454.6},{"distance":0.805,"elevation":2475.0},{"distance":0.902,"elevation":2503.2},{"distance":1.0,"elevation":2525.8},{"distance":1.1,"elevation":2534.4},{"distance":1.201,"elevation":2556.4},{"distance":1.302,"elevation":2589.2},{"distance":1.402,"elevation":2613.4},{"distance":1.501,"elevation":2649.0},{"distance":1.6,"elevation":2671.8},{"distance":1.7,"elevation":2689.8},{"distance":1.803,"elevation":2712.2},{"distance":1.904,"elevation":2741.6},{"distance":2.003,"elevation":2767.6},{"distance":2.102,"elevation":2780.6},{"distance":2.202,"elevation":2812.2},{"distance":2.3,"elevation":2841.2},{"distance":2.404,"elevation":2879.4},{"distance":2.5,"elevation":2925.8},{"distance":2.601,"elevation":2950.4},{"distance":2.7,"elevation":2981.6},{"distance":2.8,"elevation":2992.8},{"distance":2.902,"elevation":3013.0},{"distance":3.002,"elevation":3044.2},{"distance":3.1,"elevation":3074.0},{"distance":3.2,"elevation":3100.4},{"distance":3.301,"elevation":3115.6},{"distance":3.403,"elevation":3139.6},{"distance":3.503,"elevation":3154.6},{"distance":3.601,"elevation":3187.8},{"distance":3.702,"elevation":3202.4},{"distance":3.8,"elevation":3223.8},{"distance":3.9,"elevation":3232.6},{"distance":4.0,"elevation":3233.8},{"distance":4.101,"elevation":3263.8},{"distance":4.201,"elevation":3289.2},{"distance":4.301,"elevation":3320.0},{"distance":4.401,"elevation":3348.4},{"distance":4.501,"elevation":3386.2},{"distance":4.603,"elevation":3430.8},{"distance":4.7,"elevation":3454.6},{"distance":4.801,"elevation":3492.0},{"distance":4.9,"elevation":3511.0},{"distance":5.002,"elevation":3529.6},{"distance":5.101,"elevation":3553.8},{"distance":5.202,"elevation":3581.8},{"distance":5.3,"elevation":3614.8},{"distance":5.4,"elevation":3636.6},{"distance":5.501,"elevation":3630.8},{"distance":5.603,"elevation":3636.6},{"distance":5.701,"elevation":3680.2},{"distance":5.802,"elevation":3706.6},{"distance":6.047,"elevation":3637.0},{"distance":6.052,"elevation":3639.8},{"distance":6.101,"elevation":3649.2},{"distance":6.2,"elevation":3631.8},{"distance":6.301,"elevation":3601.4},{"distance":6.401,"elevation":3574.4},{"distance":6.502,"elevation":3537.8},{"distance":6.604,"elevation":3519.0},{"distance":6.701,"elevation":3498.8},{"distance":6.801,"elevation":3464.2},{"distance":6.901,"elevation":3443.0},{"distance":7.002,"elevation":3401.2},{"distance":7.102,"elevation":3361.0},{"distance":7.2,"elevation":3335.0},{"distance":7.301,"elevation":3300.4},{"distance":7.405,"elevation":3262.4},{"distance":7.5,"elevation":3228.0},{"distance":7.602,"elevation":3208.6},{"distance":7.701,"elevation":3173.4},{"distance":7.801,"elevation":3159.2},{"distance":7.902,"elevation":3135.2},{"distance":8.003,"elevation":3116.2},{"distance":8.101,"elevation":3070.6},{"distance":8.202,"elevation":3030.0},{"distance":8.301,"elevation":3012.0},{"distance":8.401,"elevation":2970.6},{"distance":8.5,"elevation":2926.2},{"distance":8.6,"elevation":2880.0},{"distance":8.7,"elevation":2844.6},{"distance":8.801,"elevation":2817.0},{"distance":8.9,"elevation":2788.6},{"distance":9.0,"elevation":2756.4},{"distance":9.111,"elevation":2726.4},{"distance":9.201,"elevation":2707.6},{"distance":9.303,"elevation":2681.6},{"distance":9.401,"elevation":2647.8},{"distance":9.504,"elevation":2633.2},{"distance":9.6,"elevation":2598.0},{"distance":9.708,"elevation":2568.6},{"distance":9.802,"elevation":2557.4},{"distance":9.901,"elevation":2545.2},{"distance":10.002,"elevation":2497.8},{"distance":10.101,"elevation":2479.4},{"distance":10.203,"elevation":2454.8},{"distance":10.3,"elevation":2416.4},{"distance":10.401,"elevation":2377.0},{"distance":10.502,"elevation":2341.8},{"distance":10.6,"elevation":2309.6},{"distance":10.7,"elevation":2283.0},{"distance":10.727,"elevation":2280.0}];

        let elevationChart = null;

        function initElevationChart() {
            const canvas = document.getElementById('elevationChart0');
            if (!canvas || !elevationData.length) return;

            const ctx = canvas.getContext('2d');
            const labels = elevationData.map(p => p.distance.toFixed(1));
            const data = elevationData.map(p => p.elevation);

            elevationChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Elevation (m)',
                        data: data,
                        fill: true,
                        borderColor: '#2D5A3D',
                        borderWidth: 2,
                        pointRadius: 0,
                        pointHoverRadius: 4,
                        backgroundColor: 'rgba(45, 90, 61, 0.15)',
                        hoverBackgroundColor: '#2D5A3D',
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: '#1A202C',
                            titleFont: { family: "'Source Sans 3', sans-serif" },
                            bodyFont: { family: "'Source Sans 3', sans-serif" },
                            callbacks: {
                                title: function(items) { return 'Distance: ' + items[0].label + ' km'; },
                                label: function(context) { return 'Elevation: ' + context.raw.toFixed(0) + 'm'; }
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Distance (km)',
                                font: { family: "'Source Sans 3', sans-serif", size: 12 },
                                color: '#64748b'
                            },
                            ticks: {
                                font: { family: "'Source Sans 3', sans-serif", size: 11 },
                                color: '#64748b',
                                maxTicksLimit: 10,
                                callback: function(value) {
                                    return parseFloat(this.getLabelForValue(value)).toFixed(1);
                                }
                            },
                            grid: { display: false }
                        },
                        y: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Elevation (m)',
                                font: { family: "'Source Sans 3', sans-serif", size: 12 },
                                color: '#64748b'
                            },
                            ticks: {
                                font: { family: "'Source Sans 3', sans-serif", size: 11 },
                                color: '#64748b'
                            },
                            grid: { color: 'rgba(0, 0, 0, 0.05)' }
                        }
                    },
                    interaction: { mode: 'nearest', axis: 'x', intersect: false }
                }
            });
        }

        function downloadElevationPNG() {
            if (!elevationChart) { showToast('No chart to download'); return; }
            const canvas = elevationChart.canvas;
            const exportCanvas = document.createElement('canvas');
            const padding = 40;
            exportCanvas.width = canvas.width + (padding * 2);
            exportCanvas.height = canvas.height + (padding * 2) + 60;
            const exportCtx = exportCanvas.getContext('2d');
            exportCtx.fillStyle = '#FFFFFF';
            exportCtx.fillRect(0, 0, exportCanvas.width, exportCanvas.height);
            exportCtx.fillStyle = '#1A202C';
            exportCtx.font = "600 18px 'Source Sans 3', sans-serif";
            exportCtx.textAlign = 'center';
            exportCtx.fillText('Chuur Peak - Elevation Profile', exportCanvas.width / 2, 35);
            exportCtx.fillStyle = '#64748b';
            exportCtx.font = "400 12px 'Source Sans 3', sans-serif";
            exportCtx.fillText('Adventure Athlete India', exportCanvas.width / 2, 55);
            exportCtx.drawImage(canvas, padding, 70);
            const link = document.createElement('a');
            link.download = 'chuur-peak-elevation.png';
            link.href = exportCanvas.toDataURL('image/png');
            link.click();
            showToast('Elevation graph downloaded!');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            syncContent('website');
            syncContent('instagram');
            syncContent('youtube');
            syncContent('summary');
            updateCharCount('instagram');
            initElevationChart();
        });
    </script>
</body>
</html>
